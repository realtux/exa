"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[724],{777:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"getting-started/docker","title":"docker","description":"exa.js is intended to be used with or without docker in both development and production. in either case it\'s useful to rely on configuration via .env for variables that differ between environments as a .env file can easily be made available to docker containers. configuration via config/master.js is useful for variables related to exa.js itself as well as variables that don\'t change between environments.","source":"@site/docs/getting-started/docker.md","sourceDirName":"getting-started","slug":"/getting-started/docker","permalink":"/getting-started/docker","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/getting-started/docker.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"project structure","permalink":"/getting-started/project-structure"},"next":{"title":"modules","permalink":"/category/modules"}}');var i=t(4848),s=t(8453);const o={sidebar_position:3},c="docker",a={},d=[{value:"compose file",id:"compose-file",level:2},{value:"helper script",id:"helper-script",level:2}];function l(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"docker",children:"docker"})}),"\n",(0,i.jsxs)(n.p,{children:["exa.js is intended to be used with or without docker in both development and production. in either case it's useful to rely on configuration via ",(0,i.jsx)(n.code,{children:".env"})," for variables that differ between environments as a ",(0,i.jsx)(n.code,{children:".env"})," file can easily be made available to docker containers. configuration via ",(0,i.jsx)(n.code,{children:"config/master.js"})," is useful for variables related to exa.js itself as well as variables that don't change between environments."]}),"\n",(0,i.jsx)(n.h2,{id:"compose-file",children:"compose file"}),"\n",(0,i.jsxs)(n.p,{children:["the only item in the docker compose file that may need to be changed is the port number. by default it uses the same port that is configured in ",(0,i.jsx)(n.code,{children:"config/master.js"})," for the app."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="docker-compose.yml"',children:'services:\n    app:\n        container_name: exa_app\n        image: node:20\n        tty: true\n        ports:\n            - "8118:8118"\n        volumes:\n            - .:/opt/src\n        working_dir: /opt/src\n        command: >\n            bash -c \'\n            if [ "$EXAENV" = "development" ]; then \n                npm i; npm run watch\n            else \n                npm i; npx --yes jmig migrate; npm start\n            fi\'\n        env_file:\n            - .env\n    console:\n        container_name: exa_console\n        image: node:20\n        tty: true\n        init: true\n        volumes:\n            - .:/opt/src\n        working_dir: /opt/src\n        env_file:\n            - .env\n        profiles:\n            - nostart\n'})}),"\n",(0,i.jsx)(n.h2,{id:"helper-script",children:"helper script"}),"\n",(0,i.jsx)(n.p,{children:"for your convenience, a docker helper script is located in the root directory to help interact with an exa.js project running in docker more easily. the helper script has the following functions:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"./docker.sh dev"})," - starts app in foreground"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"./docker.sh start"})," - starts app in background"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"./docker.sh stop"})," - stops app"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"./docker.sh shell"})," - opens shell to the container running the app"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"./docker.sh console <name>"})," - runs a console command by name"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"./docker.sh jmig <command>"})," - runs jmig in the app container","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"requires the app to be running"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"./docker.sh npm <args>"})," - runs npm in the root directory of the app"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{title:"Tip",type:"tip",children:(0,i.jsxs)(n.p,{children:["if your project was initialized to use ",(0,i.jsx)(n.code,{children:"bun"}),", swap ",(0,i.jsx)(n.code,{children:"npm"})," for ",(0,i.jsx)(n.code,{children:"bun"})," anywhere it appears"]})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>c});var r=t(6540);const i={},s=r.createContext(i);function o(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);